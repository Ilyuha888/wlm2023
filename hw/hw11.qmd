# HW11 // Логистическая регрессия. Пуассоновская регрессия {#hw11 .unnumbered}

```{=html}
<!--
REPLACE ALL hw11 TO hw<n> WITH MATCH CASE
-->
```

:::{.callout-note}
## Данные

Сегодня мы работаем с данными о факторам сердечно-сосудистых заболеваний. Ниже представлено описание данных из [источника](https://www.kaggle.com/dileep070/heart-disease-prediction-using-logistic-regression).

**Introduction** World Health Organization has estimated 12 million deaths occur worldwide, every year due to Heart diseases. Half the deaths in the United States and other developed countries are due to cardio vascular diseases. The early prognosis of cardiovascular diseases can aid in making decisions on lifestyle changes in high risk patients and in turn reduce the complications. This research intends to pinpoint the most relevant/risk factors of heart disease as well as predict the overall risk using logistic regression Data Preparation

**Source** The dataset is publically available on the Kaggle website, and it is from an ongoing cardiovascular study on residents of the town of Framingham, Massachusetts. The classification goal is to predict whether the patient has 10-year risk of future coronary heart disease (CHD).The dataset provides the patients’ information. It includes over 4,000 records and 15 attributes.

**Variables** Each attribute is a potential risk factor. There are both demographic, behavioral and medical risk factors.

- Demographic:
    - `male`: male or female (Nominal)
    - `age`: Age of the patient; (Continuous - Although the recorded ages have been truncated to whole numbers, the concept of age is continuous)
- Behavioral:
    - `currentSmoker`: whether or not the patient is a current smoker (Nominal)
    - `cigsPerDay`: the number of cigarettes that the person smoked on average in one day (can be considered continuous as one can have any number of cigarettes, even half a cigarette.)
- Medical (history):
    - `BPMeds`: whether or not the patient was on blood pressure medication (Nominal)
    - `prevalentStroke`: whether or not the patient had previously had a stroke (Nominal)
    - `prevalentHyp`: whether or not the patient was hypertensive (Nominal)
    - `diabetes`: whether or not the patient had diabetes (Nominal)
- Medical (current):
    - `totChol`: total cholesterol level (Continuous)
    - `sysBP`: systolic blood pressure (Continuous)
    - `diaBP`: diastolic blood pressure (Continuous)
    - `BMI`: Body Mass Index (Continuous)
    - `heartRate`: heart rate (Continuous — In medical research, variables such as heart rate though in fact discrete, yet are considered continuous because of large number of possible values.)
    - `glucose`: glucose level (Continuous)
- Predict variable (desired target):
    - `TenYearCHD`: 10 year risk of coronary heart disease CHD (binary: “1”, means “Yes”, “0” means “No”)

Переменную `TenYearCHD` мы будем рассматривать как целевую, все остальные --- в качестве предикторов.

:::

## Основные задания {#hw11_main}

### #1

<img id="hw11-1-level" class="level"/>

::: {#hw11-1-task .task}
a. Загрузите [датасет](https://raw.githubusercontent.com/angelgardt/wlm2023/master/data/hw11/framingham.csv) в переменую `heart`. Изучите их структуру.
b. Предобработайте данные, если это необходимо: удалите пропущенные значения, скорректируйте типы переменных. Перезапишите датасет.
:::

```{r}
library(tidyverse)
theme_set(theme_bw())

## a
heart <- read_csv("https://raw.githubusercontent.com/angelgardt/wlm2023/master/data/hw11/framingham.csv")
str(heart)

## b
### no type correction needed
heart %>% sapply(is.na) %>% apply(2, sum) ## has NA, let's remove them
heart %>% drop_na() -> heart
nrow(heart)
```

::: {#hw11-1-autocheck .autocheck}
::: {#hw11-1-ir .input-requirements}
В качестве ответа для самопроверки введите количество строк в датасете, полученном после удаления пропущенных значений.
:::

<input class="autocheck-input" type="text" id="hw11-1" placeholder="Введите ответ…">

<input class="autocheck-button" type="button" value="Проверить" onclick="check('hw11-1')">

::: {#hw11-1-fb .autocheck-feedback}
:::
:::

::: hints-wrapper
<details class="hints" id="hw11-1-hints">

<summary>Подсказка</summary>

Удалить все пропущенные значения можно с помощью функции `drop_na()`.

</details>
:::

### #2

<img id="hw11-2-level" class="level"/>

::: {#hw11-2-task .task}

Сегодня мы поработаем с изученной моделью в более «машиннообученском». подходе. Начнем в разбиения выборки на обучающую (тренировочную) и тестовую.

Разбейте данные на обучающую и тестовую выборки в соотношении 7/3 --- 70% данных должно оказать в обучающей и 30% в тестовой. Сохраните обучающий датасет в переменную `heart_train`, а тестовый --- в `heart_test`.

Для воспроизводимых результатов используйте `set.seed(616)`.

:::

```{r}
set.seed(616)
ind_train <- sample(1:nrow(heart), size = 0.7 * nrow(heart), replace = FALSE)
heart %>% 
  slice(ind_train) -> heart_train
heart %>% 
  slice(-ind_train) -> heart_test

mean(heart_train$TenYearCHD) %>% round(2)
```

::: {#hw11-2-autocheck .autocheck}
::: {#hw11-2-ir .input-requirements}
В качестве ответа для самопроверки введите среднее по переменной `TenYearCHD` обучающей выборки.
:::

<input class="autocheck-input" type="text" id="hw11-2" placeholder="Введите ответ…">

<input class="autocheck-button" type="button" value="Проверить" onclick="check('hw11-2')">

::: {#hw11-2-fb .autocheck-feedback}
:::
:::

::: hints-wrapper
<details class="hints" id="hw11-2-hints">

<summary>Подсказки</summary>

Чтобы разбить датасет на тренировочную и тестовую части, необходимо:

* сгенерировать вектор случайных индексов из номеров строк общего датасета длиной, равной 70% от числа строк датасета
* с помощью индексации (или функции из `tidyverse`) вытащить строки со сгенерированными номерами и сохранить результат в `heart_train`
* с помощью «отрицательной» индексации (или функции из `tidyverse`) вытащить строки со всеми номерами, кроме сгенерированных, и сохранить результат в `heart_test`

</details>
:::

### #3

<img id="hw11-3-level" class="level"/>

::: {#hw11-3-task .task}
Текст задания.
:::

::: {#hw11-3-autocheck .autocheck}
::: {#hw11-3-ir .input-requirements}
Описание формата инпута.
:::

<input class="autocheck-input" type="text" id="hw11-3" placeholder="Введите ответ…">

<input class="autocheck-button" type="button" value="Проверить" onclick="check('hw11-3')">

::: {#hw11-3-fb .autocheck-feedback}
:::
:::

::: hints-wrapper
<details class="hints" id="hw11-3-hints">

<summary>Подсказки</summary>

<details class="hint">

<summary>Как делать задание?</summary>

</details>

<details class="hint">

<summary>Что надо сделать?</summary>

</details>

<details class="hint">

<summary>Ответ неверный</summary>

</details>

</details>
:::

### #4

<img id="hw11-4-level" class="level"/>

::: {#hw11-4-task .task}
Текст задания.
:::

::: {#hw11-4-autocheck .autocheck}
::: {#hw11-4-ir .input-requirements}
Описание формата инпута.
:::

<input class="autocheck-input" type="text" id="hw11-4" placeholder="Введите ответ…">

<input class="autocheck-button" type="button" value="Проверить" onclick="check('hw11-4')">

::: {#hw11-4-fb .autocheck-feedback}
:::
:::

::: hints-wrapper
<details class="hints" id="hw11-4-hints">

<summary>Подсказки</summary>

<details class="hint">

<summary>Как делать задание?</summary>

</details>

<details class="hint">

<summary>Что надо сделать?</summary>

</details>

<details class="hint">

<summary>Ответ неверный</summary>

</details>

</details>
:::

### #5

<img id="hw11-5-level" class="level"/>

::: {#hw11-5-task .task}
Текст задания.
:::

::: {#hw11-5-autocheck .autocheck}
::: {#hw11-5-ir .input-requirements}
Описание формата инпута.
:::

<input class="autocheck-input" type="text" id="hw11-5" placeholder="Введите ответ…">

<input class="autocheck-button" type="button" value="Проверить" onclick="check('hw11-5')">

::: {#hw11-5-fb .autocheck-feedback}
:::
:::

::: hints-wrapper
<details class="hints" id="hw11-5-hints">

<summary>Подсказки</summary>

<details class="hint">

<summary>Как делать задание?</summary>

</details>

<details class="hint">

<summary>Что надо сделать?</summary>

</details>

<details class="hint">

<summary>Ответ неверный</summary>

</details>

</details>
:::

### #6

<img id="hw11-6-level" class="level"/>

::: {#hw11-6-task .task}
Текст задания.
:::

::: {#hw11-6-autocheck .autocheck}
::: {#hw11-6-ir .input-requirements}
Описание формата инпута.
:::

<input class="autocheck-input" type="text" id="hw11-6" placeholder="Введите ответ…">

<input class="autocheck-button" type="button" value="Проверить" onclick="check('hw11-6')">

::: {#hw11-6-fb .autocheck-feedback}
:::
:::

::: hints-wrapper
<details class="hints" id="hw11-6-hints">

<summary>Подсказки</summary>

<details class="hint">

<summary>Как делать задание?</summary>

</details>

<details class="hint">

<summary>Что надо сделать?</summary>

</details>

<details class="hint">

<summary>Ответ неверный</summary>

</details>

</details>
:::

### #7

<img id="hw11-7-level" class="level"/>

::: {#hw11-7-task .task}
Текст задания.
:::

::: {#hw11-7-autocheck .autocheck}
::: {#hw11-7-ir .input-requirements}
Описание формата инпута.
:::

<input class="autocheck-input" type="text" id="hw11-7" placeholder="Введите ответ…">

<input class="autocheck-button" type="button" value="Проверить" onclick="check('hw11-7')">

::: {#hw11-7-fb .autocheck-feedback}
:::
:::

::: hints-wrapper
<details class="hints" id="hw11-7-hints">

<summary>Подсказки</summary>

<details class="hint">

<summary>Как делать задание?</summary>

</details>

<details class="hint">

<summary>Что надо сделать?</summary>

</details>

<details class="hint">

<summary>Ответ неверный</summary>

</details>

</details>
:::

### #8

<img id="hw11-8-level" class="level"/>

::: {#hw11-8-task .task}
Текст задания.
:::

::: {#hw11-8-autocheck .autocheck}
::: {#hw11-8-ir .input-requirements}
Описание формата инпута.
:::

<input class="autocheck-input" type="text" id="hw11-8" placeholder="Введите ответ…">

<input class="autocheck-button" type="button" value="Проверить" onclick="check('hw11-8')">

::: {#hw11-8-fb .autocheck-feedback}
:::
:::

::: hints-wrapper
<details class="hints" id="hw11-8-hints">

<summary>Подсказки</summary>

<details class="hint">

<summary>Как делать задание?</summary>

</details>

<details class="hint">

<summary>Что надо сделать?</summary>

</details>

<details class="hint">

<summary>Ответ неверный</summary>

</details>

</details>
:::

### #9

<img id="hw11-9-level" class="level"/>

::: {#hw11-9-task .task}
Текст задания.
:::

::: {#hw11-9-autocheck .autocheck}
::: {#hw11-9-ir .input-requirements}
Описание формата инпута.
:::

<input class="autocheck-input" type="text" id="hw11-9" placeholder="Введите ответ…">

<input class="autocheck-button" type="button" value="Проверить" onclick="check('hw11-9')">

::: {#hw11-9-fb .autocheck-feedback}
:::
:::

::: hints-wrapper
<details class="hints" id="hw11-9-hints">

<summary>Подсказки</summary>

<details class="hint">

<summary>Как делать задание?</summary>

</details>

<details class="hint">

<summary>Что надо сделать?</summary>

</details>

<details class="hint">

<summary>Ответ неверный</summary>

</details>

</details>
:::

### #10

<img id="hw11-10-level" class="level"/>

::: {#hw11-10-task .task}
Текст задания.
:::

::: {#hw11-10-autocheck .autocheck}
::: {#hw11-10-ir .input-requirements}
Описание формата инпута.
:::

<input class="autocheck-input" type="text" id="hw11-10" placeholder="Введите ответ…">

<input class="autocheck-button" type="button" value="Проверить" onclick="check('hw11-10')">

::: {#hw11-10-fb .autocheck-feedback}
:::
:::

::: hints-wrapper
<details class="hints" id="hw11-10-hints">

<summary>Подсказки</summary>

<details class="hint">

<summary>Как делать задание?</summary>

</details>

<details class="hint">

<summary>Что надо сделать?</summary>

</details>

<details class="hint">

<summary>Ответ неверный</summary>

</details>

</details>
:::

## Дополнительные задания {#hw11_add}

### #1

<img id="hw11-11-level" class="level"/>

::: {#hw11-11-task .task}
Текст задания.
:::

::: {#hw11-11-autocheck .autocheck}
::: {#hw11-11-ir .input-requirements}
Описание формата инпута.
:::

<input class="autocheck-input" type="text" id="hw11-11" placeholder="Введите ответ…">

<input class="autocheck-button" type="button" value="Проверить" onclick="check('hw11-11')">

::: {#hw11-11-fb .autocheck-feedback}
:::
:::

::: hints-wrapper
<details class="hints" id="hw11-11-hints">

<summary>Подсказки</summary>

<details class="hint">

<summary>Как делать задание?</summary>

</details>

<details class="hint">

<summary>Что надо сделать?</summary>

</details>

<details class="hint">

<summary>Ответ неверный</summary>

</details>

</details>
:::

### #2

<img id="hw11-12-level" class="level"/>

::: {#hw11-12-task .task}
Текст задания.
:::

::: {#hw11-12-autocheck .autocheck}
::: {#hw11-12-ir .input-requirements}
Описание формата инпута.
:::

<input class="autocheck-input" type="text" id="hw11-12" placeholder="Введите ответ…">

<input class="autocheck-button" type="button" value="Проверить" onclick="check('hw11-12')">

::: {#hw11-12-fb .autocheck-feedback}
:::
:::

::: hints-wrapper
<details class="hints" id="hw11-12-hints">

<summary>Подсказки</summary>

<details class="hint">

<summary>Как делать задание?</summary>

</details>

<details class="hint">

<summary>Что надо сделать?</summary>

</details>

<details class="hint">

<summary>Ответ неверный</summary>

</details>

</details>
:::

### #3

<img id="hw11-13-level" class="level"/>

::: {#hw11-13-task .task}
Текст задания.
:::

::: {#hw11-13-autocheck .autocheck}
::: {#hw11-13-ir .input-requirements}
Описание формата инпута.
:::

<input class="autocheck-input" type="text" id="hw11-13" placeholder="Введите ответ…">

<input class="autocheck-button" type="button" value="Проверить" onclick="check('hw11-13')">

::: {#hw11-13-fb .autocheck-feedback}
:::
:::

::: hints-wrapper
<details class="hints" id="hw11-13-hints">

<summary>Подсказки</summary>

<details class="hint">

<summary>Как делать задание?</summary>

</details>

<details class="hint">

<summary>Что надо сделать?</summary>

</details>

<details class="hint">

<summary>Ответ неверный</summary>

</details>

</details>
:::

### #4

<img id="hw11-14-level" class="level"/>

::: {#hw11-14-task .task}
Текст задания.
:::

::: {#hw11-14-autocheck .autocheck}
::: {#hw11-14-ir .input-requirements}
Описание формата инпута.
:::

<input class="autocheck-input" type="text" id="hw11-14" placeholder="Введите ответ…">

<input class="autocheck-button" type="button" value="Проверить" onclick="check('hw11-14')">

::: {#hw11-14-fb .autocheck-feedback}
:::
:::

::: hints-wrapper
<details class="hints" id="hw11-14-hints">

<summary>Подсказки</summary>

<details class="hint">

<summary>Как делать задание?</summary>

</details>

<details class="hint">

<summary>Что надо сделать?</summary>

</details>

<details class="hint">

<summary>Ответ неверный</summary>

</details>

</details>
:::

### #5

<img id="hw11-15-level" class="level"/>

::: {#hw11-15-task .task}
Текст задания.
:::

::: {#hw11-15-autocheck .autocheck}
::: {#hw11-15-ir .input-requirements}
Описание формата инпута.
:::

<input class="autocheck-input" type="text" id="hw11-15" placeholder="Введите ответ…">

<input class="autocheck-button" type="button" value="Проверить" onclick="check('hw11-15')">

::: {#hw11-15-fb .autocheck-feedback}
:::
:::

::: hints-wrapper
<details class="hints" id="hw11-15-hints">

<summary>Подсказки</summary>

<details class="hint">

<summary>Как делать задание?</summary>

</details>

<details class="hint">

<summary>Что надо сделать?</summary>

</details>

<details class="hint">

<summary>Ответ неверный</summary>

</details>

</details>
:::

```{=html}
<!--- CHANGE hw11 TO hw<n> IN THE LINES BELOW--->
<script type="text/javascript" src="./js/hw11.json"></script>
<script type="text/javascript" src="./js/hw.js"></script>
```
