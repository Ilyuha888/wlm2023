install.packages('googlesheets4')
library(googlesheets4)
library(tidyverse)
#Read google sheets data into R
x <- read_sheet('https://docs.google.com/spreadsheets/d/1iCy8MDz-ER95OfylV-xAY6lIxfbCZiHq5NM3i4smm5M/edit#gid=1353840808')
x
rm(x)
#Read google sheets data into R
ans <- read_sheet('https://docs.google.com/spreadsheets/d/1iCy8MDz-ER95OfylV-xAY6lIxfbCZiHq5NM3i4smm5M/edit#gid=1353840808') %>%
select(id, autocheck_answer, hw, n)
ans
#Read google sheets data into R
ans <- read_sheet('https://docs.google.com/spreadsheets/d/1iCy8MDz-ER95OfylV-xAY6lIxfbCZiHq5NM3i4smm5M/edit#gid=1353840808') %>%
select(id, autocheck_answer, hw, n)
ans
?map()
1 |> sum(2)
sum(1,2)
1:10 |>
1:10 %>%
map(rnorm, n = 10)
1:10 %>%
map(rnorm, n = 10) %>% map(mean)
ans %>% filter(hw == "hw1")
ans %>%
filter(hw == "hw1") %>%
write_txt()
ans %>%
filter(hw == "hw1") %>%
map()
ans %>%
filter(hw == "hw1") %>%
map(print)
ans %>%
filter(hw == "hw1") %>%
select(id, autocheck_answer)
ans %>%
filter(hw == "hw1") %>%
select(id, autocheck_answer) %>%
unite()
ans %>%
filter(hw == "hw1") %>%
select(id, autocheck_answer) %>%
unite(col)
ans %>%
filter(hw == "hw1") %>%
select(id, autocheck_answer) %>%
unite(col, sep = :)
ans %>%
filter(hw == "hw1") %>%
select(id, autocheck_answer) %>%
unite(col, sep = ":")
ans %>%
filter(hw == "hw1") %>%
select(id, autocheck_answer) %>%
unite(col, sep = ": ")
ans %>%
filter(hw == "hw1") %>%
select(id, autocheck_answer) %>%
unite(col, sep = ": ") %>%
map(print)
ans %>%
filter(hw == "hw1") %>%
select(id, autocheck_answer) %>%
unite(col, sep = ": ") %>%
paste("ans = ", .)
ans %>%
filter(hw == "hw1") %>%
select(id, autocheck_answer) %>%
unite(col, sep = ": ")
ans %>%
filter(hw == "hw1") %>%
select(id, autocheck_answer) %>%
unite(col, sep = ": ") %>% unlist()
ans %>%
filter(hw == "hw1") %>%
select(id, autocheck_answer) %>%
unite(col, sep = ": ") %>%
unlist() %>% class()
ans %>%
filter(hw == "hw1") %>%
select(id, autocheck_answer) %>%
unite(col, sep = ": ") %>%
unlist() %>%
paste(sep = ",")
ans %>%
filter(hw == "hw1") %>%
select(id, autocheck_answer) %>%
unite(col, sep = ": ") %>%
unlist() %>%
paste(sep = ",") %>% class()
ans %>%
filter(hw == "hw1") %>%
select(id, autocheck_answer) %>%
unite(col, sep = ": ") %>%
unlist() %>%
paste()
ans %>%
filter(hw == "hw1") %>%
select(id, autocheck_answer) %>%
unite(col, sep = ": ") %>%
unlist() %>%
paste() %>% paste(sep = ",")
ans %>%
filter(hw == "hw1") %>%
select(id, autocheck_answer) %>%
unite(col, sep = ": ") %>%
unlist() %>%
paste(collapse = TRUE)
ans %>%
filter(hw == "hw1") %>%
select(id, autocheck_answer) %>%
unite(col, sep = ": ") %>%
unlist() %>%
paste(collapse = ",")
ans %>%
filter(hw == "hw1") %>%
select(id, autocheck_answer) %>%
unite(col, sep = ": ") %>%
unlist() %>%
paste(collapse = ",\n")
ans %>%
filter(hw == "hw1") %>%
select(id, autocheck_answer) %>%
unite(col, sep = ": ") %>%
unlist() %>%
paste(collapse = ",\n") %>%
paste("ans = {", ., "}")
ans %>%
filter(hw == "hw1") %>%
select(id, autocheck_answer) %>%
unite(col, sep = ": ") %>%
unlist() %>%
paste(collapse = ",\n") %>%
paste0("ans = {\n", ., "\n}")
sink(file = "ans_hw1.txt")
ans %>%
filter(hw == "hw1") %>%
select(id, autocheck_answer) %>%
unite(col, sep = ": ") %>%
unlist() %>%
paste(collapse = ",\n") %>%
paste0("ans = {\n", ., "\n}")
sink()
install.packages("rjson")
library(googlesheets4)
library(rjson)
library(googlesheets4)
library(rjson)
library(tidyverse)
#Read google sheets data into R
ans <- read_sheet('https://docs.google.com/spreadsheets/d/1iCy8MDz-ER95OfylV-xAY6lIxfbCZiHq5NM3i4smm5M/edit#gid=1353840808') %>%
select(id, autocheck_answer, hw, n)
ans
ans %>%
filter(hw == "hw1") %>%
select(id, autocheck_answer) %>%
list()
ans %>%
filter(hw == "hw1") %>%
select(id, autocheck_answer) %>%
toJSON()
ans %>%
filter(hw == "hw1") %>%
select(id, autocheck_answer) %>%
pivot_wider(names_from = id, values_from = autocheck_answer) %>%
toJSON()
ans %>%
filter(hw == "hw1") %>%
select(id, autocheck_answer) %>%
pivot_wider(names_from = id,
values_from = autocheck_answer) %>%
toJSON() %>%
paste0("ans='[", ., "]'")
ans %>%
filter(hw == "hw1") %>%
select(id, autocheck_answer) %>%
pivot_wider(names_from = id,
values_from = autocheck_answer) %>%
toJSON() %>%
paste0("ans='[", ., "]'") %>%
write("ans_hw1.json")
ans %>%
filter(hw == "hw1") %>%
select(id, autocheck_answer) %>%
pivot_wider(names_from = id,
values_from = autocheck_answer) %>%
toJSON() %>%
write("ans_hw1.json")
ans %>%
filter(hw == "hw1") %>%
select(id, autocheck_answer) %>%
pivot_wider(names_from = id,
values_from = autocheck_answer) %>%
toJSON() %>%
write("ans_test.json")
ans %>%
filter(hw == "hw1") %>%
select(id, autocheck_answer) %>%
pivot_wider(names_from = id,
values_from = autocheck_answer) %>%
toJSON() %>%
paste0("answers='[", ., "]'")
ans %>%
filter(hw == "hw1") %>%
select(id, autocheck_answer) %>%
pivot_wider(names_from = id,
values_from = autocheck_answer) %>%
toJSON() %>%
paste0("answers='[", ., "]'") %>%
write("ans_test.json")
get_json <- function(hw, ans) {
ans %>%
filter(hw == hw) %>%
select(id, autocheck_answer) %>%
pivot_wider(names_from = id,
values_from = autocheck_answer) %>%
toJSON() %>%
paste0("answers='[", ., "]'") %>%
write(paste0("ans_", hw, ".json"))
}
unique(ans$hw)
unique(ans$hw) |> map(get_json)
unique(ans$hw) |> map(get_json, ans = ans)
unique(ans$hw) %>%  map(get_json, ans = ans)
unique(ans$hw)
unique(ans$hw) %>% list() #%>%  map(get_json, ans = ans)
unique(ans$hw) %>% as.list() #%>%  map(get_json, ans = ans)
unique(ans$hw) %>% as.list() %>%  map(get_json, ans = ans)
unique(ans$hw) %>% as.list() %>% map(get_json, ans = ans)
unique(ans$hw) %>% as.list()
unique(ans$hw) %>% as.list() %>% map(get_json, ans = ans)
unique(ans$hw) %>% map(get_json, ans = ans)
get_json <- function(hw_n, ans) {
ans %>%
filter(hw == hw_n) %>%
select(id, autocheck_answer) %>%
pivot_wider(names_from = id,
values_from = autocheck_answer) %>%
toJSON() %>%
paste0("answers='[", ., "]'") %>%
write(paste0("ans_", hw, ".json"))
}
unique(ans$hw) %>% map(get_json, ans = ans)
ans %>%
filter(hw == hw_n) %>%
select(id, autocheck_answer) %>%
pivot_wider(names_from = id,
values_from = autocheck_answer) %>%
toJSON() %>%
paste0("answers='[", ., "]'") %>%
write(paste0("ans_", hw_n, ".json"))
get_json <- function(hw_n, ans) {
ans %>%
filter(hw == hw_n) %>%
select(id, autocheck_answer) %>%
pivot_wider(names_from = id,
values_from = autocheck_answer) %>%
toJSON() %>%
paste0("answers='[", ., "]'") %>%
write(paste0("ans_", hw_n, ".json"))
}
unique(ans$hw) %>% map(get_json, ans = ans)
unique(ans$hw) %>% map(get_json, ans = ans, progress=FALSE)
unique(ans$hw) %>% map(get_json, ans = ans, .progress=FALSE)
get_json <- function(hw_n, ans) {
ans %>%
filter(hw == hw_n) %>%
select(id, autocheck_answer) %>%
pivot_wider(names_from = id,
values_from = autocheck_answer) %>%
toJSON() %>%
paste0("answers='[", ., "]'") %>%
write(paste0("ans_", hw_n, ".json"))
return(NULL)
}
unique(ans$hw) %>% map(get_json, ans = ans)
