library(rjson)
library(googlesheets4)
library(rjson)
library(tidyverse)
#Read google sheets data into R
ans <- read_sheet('https://docs.google.com/spreadsheets/d/1iCy8MDz-ER95OfylV-xAY6lIxfbCZiHq5NM3i4smm5M/edit#gid=1353840808') %>%
select(id, autocheck_answer, hw, n)
ans
ans %>%
filter(hw == "hw1") %>%
select(id, autocheck_answer) %>%
list()
ans %>%
filter(hw == "hw1") %>%
select(id, autocheck_answer) %>%
toJSON()
ans %>%
filter(hw == "hw1") %>%
select(id, autocheck_answer) %>%
pivot_wider(names_from = id, values_from = autocheck_answer) %>%
toJSON()
ans %>%
filter(hw == "hw1") %>%
select(id, autocheck_answer) %>%
pivot_wider(names_from = id,
values_from = autocheck_answer) %>%
toJSON() %>%
paste0("ans='[", ., "]'")
ans %>%
filter(hw == "hw1") %>%
select(id, autocheck_answer) %>%
pivot_wider(names_from = id,
values_from = autocheck_answer) %>%
toJSON() %>%
paste0("ans='[", ., "]'") %>%
write("ans_hw1.json")
ans %>%
filter(hw == "hw1") %>%
select(id, autocheck_answer) %>%
pivot_wider(names_from = id,
values_from = autocheck_answer) %>%
toJSON() %>%
write("ans_hw1.json")
ans %>%
filter(hw == "hw1") %>%
select(id, autocheck_answer) %>%
pivot_wider(names_from = id,
values_from = autocheck_answer) %>%
toJSON() %>%
write("ans_test.json")
ans %>%
filter(hw == "hw1") %>%
select(id, autocheck_answer) %>%
pivot_wider(names_from = id,
values_from = autocheck_answer) %>%
toJSON() %>%
paste0("answers='[", ., "]'")
ans %>%
filter(hw == "hw1") %>%
select(id, autocheck_answer) %>%
pivot_wider(names_from = id,
values_from = autocheck_answer) %>%
toJSON() %>%
paste0("answers='[", ., "]'") %>%
write("ans_test.json")
get_json <- function(hw, ans) {
ans %>%
filter(hw == hw) %>%
select(id, autocheck_answer) %>%
pivot_wider(names_from = id,
values_from = autocheck_answer) %>%
toJSON() %>%
paste0("answers='[", ., "]'") %>%
write(paste0("ans_", hw, ".json"))
}
unique(ans$hw)
unique(ans$hw) |> map(get_json)
unique(ans$hw) |> map(get_json, ans = ans)
unique(ans$hw) %>%  map(get_json, ans = ans)
unique(ans$hw)
unique(ans$hw) %>% list() #%>%  map(get_json, ans = ans)
unique(ans$hw) %>% as.list() #%>%  map(get_json, ans = ans)
unique(ans$hw) %>% as.list() %>%  map(get_json, ans = ans)
unique(ans$hw) %>% as.list() %>% map(get_json, ans = ans)
unique(ans$hw) %>% as.list()
unique(ans$hw) %>% as.list() %>% map(get_json, ans = ans)
unique(ans$hw) %>% map(get_json, ans = ans)
get_json <- function(hw_n, ans) {
ans %>%
filter(hw == hw_n) %>%
select(id, autocheck_answer) %>%
pivot_wider(names_from = id,
values_from = autocheck_answer) %>%
toJSON() %>%
paste0("answers='[", ., "]'") %>%
write(paste0("ans_", hw, ".json"))
}
unique(ans$hw) %>% map(get_json, ans = ans)
ans %>%
filter(hw == hw_n) %>%
select(id, autocheck_answer) %>%
pivot_wider(names_from = id,
values_from = autocheck_answer) %>%
toJSON() %>%
paste0("answers='[", ., "]'") %>%
write(paste0("ans_", hw_n, ".json"))
get_json <- function(hw_n, ans) {
ans %>%
filter(hw == hw_n) %>%
select(id, autocheck_answer) %>%
pivot_wider(names_from = id,
values_from = autocheck_answer) %>%
toJSON() %>%
paste0("answers='[", ., "]'") %>%
write(paste0("ans_", hw_n, ".json"))
}
unique(ans$hw) %>% map(get_json, ans = ans)
unique(ans$hw) %>% map(get_json, ans = ans, progress=FALSE)
unique(ans$hw) %>% map(get_json, ans = ans, .progress=FALSE)
get_json <- function(hw_n, ans) {
ans %>%
filter(hw == hw_n) %>%
select(id, autocheck_answer) %>%
pivot_wider(names_from = id,
values_from = autocheck_answer) %>%
toJSON() %>%
paste0("answers='[", ., "]'") %>%
write(paste0("ans_", hw_n, ".json"))
return(NULL)
}
unique(ans$hw) %>% map(get_json, ans = ans)
library(googlesheets4)
library(rjson)
library(tidyverse)
FIELDS = c("id",
"task",
"level",
"input_requirements",
"hint_titles",
"hints",
"has_autocheck",
"autocheck_answer",
"hw",
"n")
#Read google sheets data into R
hws_table <- read_sheet('https://docs.google.com/spreadsheets/d/1iCy8MDz-ER95OfylV-xAY6lIxfbCZiHq5NM3i4smm5M/edit#gid=1353840808') %>%
select(FIELDS)
hws_table
hws_table %>% View
#Read google sheets data into R
hws_table <- read_sheet('https://docs.google.com/spreadsheets/d/1iCy8MDz-ER95OfylV-xAY6lIxfbCZiHq5NM3i4smm5M/edit#gid=1353840808') %>%
select(FIELDS)
hws_table %>% View
ans %>%
filter(hw == hw1)
hws_table %>%
filter(hw == hw1)
hws_table %>%
filter(hw == "hw1")
hws_table %>%
filter(hw == "hw1") %>%
select(-hw, -n)
FIELDS[-"id"]
FIELDS[-1]
FIELDS[which(FIELDS %in% c("id", "n", "hw"))]
FIELDS[!which(FIELDS %in% c("id", "n", "hw"))]
FIELDS %in% c("id", "n", "hw"))]
FIELDS %in% c("id", "n", "hw")
FIELDS[which(!FIELDS %in% c("id", "n", "hw"))]
hws_table %>%
filter(hw == "hw1") %>%
select(-hw, -n) %>%
pivot_longer(cols = FIELDS[which(!FIELDS %in% c("id", "n", "hw"))])
hws_table %>%
filter(hw == "hw1") %>%
select(-hw, -n) %>%
mutate(has_autocheck = as.character(has_autocheck)) %>%
pivot_longer(cols = FIELDS[which(!FIELDS %in% c("id", "n", "hw"))])
#Read google sheets data into R
hws_table <- read_sheet('https://docs.google.com/spreadsheets/d/1iCy8MDz-ER95OfylV-xAY6lIxfbCZiHq5NM3i4smm5M/edit#gid=1353840808') %>%
select(FIELDS)
hws_table %>%
filter(hw == "hw1") %>%
select(-hw, -n) %>%
pivot_longer(cols = FIELDS[-which(FIELDS %in% c("id", "n", "hw"))])
hws_table %>%
filter(hw == "hw1") %>%
select(-hw, -n) %>%
pivot_longer(cols = FIELDS[-which(FIELDS %in% c("id", "n", "hw"))]) %>%
pivot_wider(names_from = id,
values_from = value)
hws_table %>%
filter(hw == "hw1") %>%
select(-hw, -n) %>%
pivot_longer(cols = FIELDS[-which(FIELDS %in% c("id", "n", "hw"))]) %>%
pivot_wider(names_from = id,
values_from = value) %>% View
hws_table %>%
filter(hw == "hw1") %>%
select(-hw, -n) %>%
pivot_longer(cols = FIELDS[-which(FIELDS %in% c("id", "n", "hw"))]) %>%
pivot_wider(names_from = id,
values_from = value) %>%
toJSON() %>% View
hws_table %>%
filter(hw == "hw1") %>%
select(-hw, -n) %>%
pivot_longer(cols = FIELDS[-which(FIELDS %in% c("id", "n", "hw"))]) %>%
pivot_wider(names_from = id,
values_from = value) %>%
toJSON() %>% print()
hws_table %>%
filter(hw == "hw1") %>%
select(-hw, -n) %>%
pivot_longer(cols = FIELDS[-which(FIELDS %in% c("id", "n", "hw"))]) %>%
pivot_wider(names_from = id,
values_from = value) %>%
toJSON() %>% View
hws_table %>%
filter(hw == "hw1") %>%
select(-hw, -n) %>%
pivot_longer(cols = FIELDS[-which(FIELDS %in% c("id", "n", "hw"))]) %>%
pivot_wider(names_from = id,
values_from = value) %>%
toJSON() %>%
paste0(hw_n, "_json='[", ., "]'")
hws_table %>%
filter(hw == "hw1") %>%
select(-hw, -n) %>%
pivot_longer(cols = FIELDS[-which(FIELDS %in% c("id", "n", "hw"))]) %>%
pivot_wider(names_from = id,
values_from = value) %>%
toJSON() %>%
paste0("hw1", "_json='[", ., "]'")
hws_table %>%
filter(hw == "hw1") %>%
replace_na("") %>%
select(-hw, -n) %>%
pivot_longer(cols = FIELDS[-which(FIELDS %in% c("id", "n", "hw"))]) %>%
pivot_wider(names_from = id,
values_from = value) %>%
toJSON() %>%
paste0("hw1", "_json='[", ., "]'")
hws_table %>%
filter(hw == "hw1") %>%
replace(is.na(.), "") %>%
select(-hw, -n) %>%
pivot_longer(cols = FIELDS[-which(FIELDS %in% c("id", "n", "hw"))]) %>%
pivot_wider(names_from = id,
values_from = value) %>%
toJSON() %>%
paste0("hw1", "_json='[", ., "]'")
hws_table %>%
filter(hw == "hw1") %>%
mutate(
across(everything(), ~replace_na(.x, ""))
) %>%
select(-hw, -n) %>%
pivot_longer(cols = FIELDS[-which(FIELDS %in% c("id", "n", "hw"))]) %>%
pivot_wider(names_from = id,
values_from = value) %>%
toJSON() %>%
paste0("hw1", "_json='[", ., "]'")
FIELDS = c("id",
"task",
"level",
"input_requirements",
"hint_titles",
"hints",
"has_autocheck",
"autocheck_answer",
"hw",
"n")
install.packages("jsonlite")
install.packages("jsonlite")
install.packages("jsonlite")
library(googlesheets4)
library(tidyverse)
hws_table %>%
filter(hw == "hw1") %>%
mutate(
across(everything(), ~replace_na(.x, ""))
) %>%
select(-hw, -n) %>%
pivot_longer(cols = -id) %>%
pivot_wider(names_from = id,
values_from = value) %>%
jsonlite::toJSON(dataframe = "rows") %>%
paste0(hwn, "_json='", ., "'")
hws_table %>%
filter(hw == "hw1") %>%
mutate(
across(everything(), ~replace_na(.x, ""))
) %>%
select(-hw, -n) %>%
pivot_longer(cols = -id) %>%
pivot_wider(names_from = id,
values_from = value) %>%
jsonlite::toJSON(dataframe = "rows") %>%
paste0("hw1", "_json='", ., "'")
hws_table %>%
filter(hw == "hw1") %>%
mutate(
across(everything(), ~replace_na(.x, ""))
) %>%
select(-hw, -n) %>%
pivot_longer(cols = -id) %>%
pivot_wider(names_from = id,
values_from = value) %>%
jsonlite::toJSON(dataframe = "rows")
hws_table %>%
filter(hw == "hw1") %>%
mutate(
across(everything(), ~replace_na(.x, ""))
) %>%
select(-hw, -n) %>%
pivot_longer(cols = -id) %>%
pivot_wider(names_from = id,
values_from = value) %>%
jsonlite::toJSON(dataframe = "rows") %>%
str_replace_all("\\n", "||") %>%
paste0("hw1", "_json='", ., "'")
hws_table %>%
filter(hw == "hw1") %>%
mutate(
across(everything(), ~replace_na(.x, ""))
) %>%
select(-hw, -n) %>%
pivot_longer(cols = -id) %>%
pivot_wider(names_from = id,
values_from = value) %>%
jsonlite::toJSON(dataframe = "rows") %>%
str_replace_all("\n", "||") %>%
paste0("hw1", "_json='", ., "'")
#Read google sheets data into R
hws_table <- read_sheet('https://docs.google.com/spreadsheets/d/1iCy8MDz-ER95OfylV-xAY6lIxfbCZiHq5NM3i4smm5M/edit#gid=1353840808') %>%
select(all_of(FIELDS))
hws_table %>%
filter(hw == "hw1") %>%
mutate(
across(everything(), ~replace_na(.x, ""))
) %>%
select(-hw, -n) %>%
pivot_longer(cols = -id) %>%
pivot_wider(names_from = id,
values_from = value) %>%
jsonlite::toJSON(dataframe = "rows") %>%
str_replace_all("\n", "||") %>%
paste0("hw1", "_json='", ., "'")
hws_table %>%
filter(hw == "hw1") %>%
mutate(
across(everything(), ~replace_na(.x, ""))
) %>%
select(-hw, -n) %>%
pivot_longer(cols = -id) %>%
pivot_wider(names_from = id,
values_from = value) %>%
jsonlite::toJSON(dataframe = "rows") %>%
str_replace_all("[\r\n]", "||") %>%
paste0("hw1", "_json='", ., "'")
hws_table %>%
filter(hw == "hw1") %>%
mutate(
across(everything(), ~replace_na(.x, ""))
) %>%
select(-hw, -n) %>%
pivot_longer(cols = -id) %>%
pivot_wider(names_from = id,
values_from = value) %>%
jsonlite::toJSON(dataframe = "rows") %>%
str_replace_all("[\r\n]", "||") %>%
paste0("hw1", "_json='[", ., "]'")
hws_table %>%
filter(hw == "hw1") %>%
mutate(
across(everything(), ~replace_na(.x, ""))
) %>%
select(-hw, -n) %>%
pivot_longer(cols = -id) %>%
pivot_wider(names_from = id,
values_from = value) %>% View
hws_table %>%
filter(hw == "hw1") %>%
mutate(
across(everything(), ~replace_na(.x, ""))
) %>%
select(-hw, -n) %>%
pivot_longer(cols = -id) %>%
pivot_wider(names_from = id,
values_from = value) %>% .["hints"]
hws_table %>%
filter(hw == "hw1") %>%
mutate(
across(everything(), ~replace_na(.x, ""))
) %>%
select(-hw, -n) %>%
pivot_longer(cols = -id) %>%
pivot_wider(names_from = id,
values_from = value) %>% .["hw1"]
hws_table %>%
filter(hw == "hw1") %>%
mutate(
across(everything(), ~replace_na(.x, ""))
) %>%
select(-hw, -n) %>%
pivot_longer(cols = -id) %>%
pivot_wider(names_from = id,
values_from = value) %>% .["hw1-1"]
hws_table %>%
filter(hw == "hw1") %>%
mutate(
across(everything(), ~replace_na(.x, ""))
) %>%
select(-hw, -n) %>%
select(hints)
hws_table %>%
filter(hw == "hw1") %>%
mutate(
across(everything(), ~replace_na(.x, ""))
) %>%
select(-hw, -n) %>%
mutate_at(vars(hints_titles, hints), str_replace_all("\n", "||")) %>% select(hints_titles, hints)
hws_table %>%
filter(hw == "hw1") %>%
mutate(
across(everything(), ~replace_na(.x, ""))
) %>%
select(-hw, -n) %>%
mutate_at(vars(hint_titles, hints), str_replace_all("\n", "||")) %>% select(hint_titles, hints)
hws_table %>%
filter(hw == "hw1") %>%
mutate(
across(everything(), ~replace_na(.x, ""))
) %>%
select(-hw, -n) %>%
mutate_at(vars(hint_titles, hints), str_replace_all(., "\n", "||")) %>% select(hint_titles, hints)
hws_table %>%
filter(hw == "hw1") %>%
mutate(
across(everything(), ~replace_na(.x, ""))
) %>%
select(-hw, -n) %>%
mutate_at(vars(hint_titles, hints), ~str_replace_all("\n", "||")) %>% select(hint_titles, hints)
hws_table %>%
filter(hw == "hw1") %>%
mutate(
across(everything(), ~replace_na(.x, ""))
) %>%
select(-hw, -n) %>%
mutate_at(vars(hint_titles, hints), ~str_replace_all(., "\n", "||")) %>% select(hint_titles, hints)
hws_table %>%
filter(hw == "hw1") %>%
mutate(
across(everything(), ~replace_na(.x, ""))
) %>%
select(-hw, -n) %>%
mutate_at(vars(hint_titles, hints), ~str_replace_all(., "\n", "||")) %>%
pivot_longer(cols = -id) %>%
pivot_wider(names_from = id,
values_from = value) %>%
jsonlite::toJSON(dataframe = "rows") %>%
str_replace_all("[\r\n]", "||") %>%
paste0("hw1", "_json='[", ., "]'")
hws_table %>%
filter(hw == "hw1") %>%
mutate(
across(everything(), ~replace_na(.x, ""))
) %>%
select(-hw, -n) %>%
mutate_at(vars(hint_titles, hints), ~str_replace_all(., "\n", "||")) %>%
mutate_at(vars(task, hint_titles, hints), ~str_replace_all(., "<", "<code>")) %>%
mutate_at(vars(task, hint_titles, hints), ~str_replace_all(., ">", "</code>")) %>%
pivot_longer(cols = -id) %>%
pivot_wider(names_from = id,
values_from = value) %>%
jsonlite::toJSON(dataframe = "rows") %>%
str_replace_all("[\r\n]", "||") %>%
paste0("hw1", "_json='[", ., "]'")
library(googlesheets4)
library(tidyverse)
FIELDS = c("id",
"task",
"level",
"input_requirements",
"hint_titles",
"hints",
"has_autocheck",
"autocheck_answer",
"hw",
"n")
#Read google sheets data into R
hws_table <- read_sheet('https://docs.google.com/spreadsheets/d/1iCy8MDz-ER95OfylV-xAY6lIxfbCZiHq5NM3i4smm5M/edit#gid=1353840808') %>%
select(all_of(FIELDS))
#Read google sheets data into R
hws_table <- read_sheet('https://docs.google.com/spreadsheets/d/1iCy8MDz-ER95OfylV-xAY6lIxfbCZiHq5NM3i4smm5M/edit#gid=1353840808') %>%
select(all_of(FIELDS))
hws_table %>%
filter(hw == "hw1") %>%
mutate(
across(everything(), ~replace_na(.x, ""))
) %>%
select(-hw, -n) %>%
mutate_at(vars(hint_titles, hints), ~str_replace_all(., "\n", "||")) %>%
mutate_at(vars(task, hint_titles, hints), ~str_replace_all(., "<", "<code>")) %>%
mutate_at(vars(task, hint_titles, hints), ~str_replace_all(., ">", "</code>")) %>%
pivot_longer(cols = -id) %>%
pivot_wider(names_from = id,
values_from = value) %>%
jsonlite::toJSON(dataframe = "rows") %>%
str_replace_all("[\r\n]", "||") %>%
paste0("hw1", "_json='[", ., "]'")
